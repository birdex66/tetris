#!/bin/bash

if [ "$#" -ne 1 ]; then
    echo "One argument expected"
    if [ "$#" -lt 2 ]; then
        echo "Specify a compilation type!!"
        echo "Default Type:                        0"
        echo "Mid-Speed Type (Safer defaults):     1"
        echo "Maximum Speed Type:                  2"
    fi
    exit 1
fi

if [ "$1" == 0 ]; then
    g++ src/tetris.cpp src/functions.cpp -o dev -lncurses && 
    rm bin/dev ;
    mv dev bin/ &&
    ./bin/dev
elif [ "$1" == 1 ]; then
    g++ -O1 src/tetris.cpp src/functions.cpp -o stable -lncurses &&
    rm bin/stable ;
    mv stable bin/ && 
    ./bin/stable
elif [ "$1" == 2 ]; then
    g++ -O3 src/tetris.cpp src/functions.cpp -o perf -lncurses &&
    rm bin/perf ;
    mv perf bin/ &&
    ./bin/perf
fi

exit 0
